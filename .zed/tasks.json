[
  {
    "label": "kong: status",
    "command": "echo '=== Kong Gateway Status ===' && curl -sf http://localhost:8001/status | jq .",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "kong: list services",
    "command": "echo '=== Kong Services ===' && curl -sf http://localhost:8001/services | jq .",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "kong: list routes",
    "command": "echo '=== Kong Routes ===' && curl -sf http://localhost:8001/routes | jq .",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "kong: list plugins",
    "command": "echo '=== Kong Plugins ===' && curl -sf http://localhost:8001/plugins | jq .",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "kong: sync config (decK)",
    "command": "deck gateway sync kong/kong.yml --kong-addr http://localhost:8001",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "kong: dump config (decK)",
    "command": "deck gateway dump --kong-addr http://localhost:8001 | jq .",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "kong: diff config (decK)",
    "command": "deck gateway diff kong/kong.yml --kong-addr http://localhost:8001",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "kong: view logs",
    "command": "docker logs -f $(docker ps --filter 'name=kong' --filter 'ancestor=kong/kong-gateway:3.9' -q | head -1)",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "kong: restart",
    "command": "echo '=== Restarting Kong ===' && docker restart $(docker ps --filter 'name=kong' --filter 'ancestor=kong/kong-gateway:3.9' -q | head -1) > /dev/null && echo 'Status: Restarted successfully' && echo 'Health: Waiting...' && sleep 2 && curl -sf http://localhost:8001/status > /dev/null && echo 'Health: Ready'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: ping",
    "command": "echo '=== Redis Health ===' && RESULT=$(docker exec $(docker ps --filter 'name=redis' -q | head -1) redis-cli ping 2>/dev/null) && echo \"Response: $RESULT\" && echo \"Status:   Connected\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: monitor (live commands)",
    "command": "docker exec -it $(docker ps --filter 'name=redis' -q | head -1) redis-cli monitor",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "redis: info stats",
    "command": "echo '=== Redis Statistics ===' && docker exec $(docker ps --filter 'name=redis' -q | head -1) redis-cli info stats",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: keys (all)",
    "command": "echo '=== Redis Keys ===' && docker exec $(docker ps --filter 'name=redis' -q | head -1) redis-cli keys '*'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: flush all",
    "command": "echo '=== Redis Flush ===' && BEFORE=$(docker exec $(docker ps --filter 'name=redis' -q | head -1) redis-cli dbsize | awk '{print $2}') && docker exec $(docker ps --filter 'name=redis' -q | head -1) redis-cli flushall > /dev/null && echo \"Keys before: $BEFORE\" && echo \"Keys after:  0\" && echo \"Status:      Flushed\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: interactive CLI",
    "command": "docker exec -it $(docker ps --filter 'name=redis' -q | head -1) redis-cli",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "redis: start (standalone)",
    "command": "echo '=== Starting Redis ===' && docker run -d --name auth-redis -p 6379:6379 --restart unless-stopped redis:7-alpine redis-server --appendonly yes --maxmemory 128mb --maxmemory-policy allkeys-lru > /dev/null && echo \"Container: auth-redis\" && echo \"Port:      6379\" && echo \"Memory:    128MB (LRU eviction)\" && echo \"Status:    Running\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: stop",
    "command": "echo '=== Stopping Redis ===' && docker stop auth-redis 2>/dev/null && echo \"Container: auth-redis\" && echo \"Status:    Stopped\" || echo \"Status:    Not running\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: remove",
    "command": "echo '=== Removing Redis ===' && docker rm auth-redis 2>/dev/null && echo \"Container: auth-redis\" && echo \"Status:    Removed\" || echo \"Status:    No container to remove\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: restart (standalone)",
    "command": "echo '=== Restarting Redis ===' && docker stop auth-redis 2>/dev/null; docker rm auth-redis 2>/dev/null; docker run -d --name auth-redis -p 6379:6379 --restart unless-stopped redis:7-alpine redis-server --appendonly yes --maxmemory 128mb --maxmemory-policy allkeys-lru > /dev/null && echo \"Container: auth-redis\" && echo \"Port:      6379\" && echo \"Status:    Restarted\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: logs",
    "command": "docker logs -f auth-redis",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "redis: status",
    "command": "echo '=== Redis Status ===' && docker ps --filter 'name=redis' --format 'Container: {{.Names}}\\nStatus:    {{.Status}}\\nPorts:     {{.Ports}}' | head -3",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: bigkeys",
    "command": "docker exec $(docker ps --filter 'name=redis' -q | head -1) redis-cli --bigkeys",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: memkeys",
    "command": "docker exec $(docker ps --filter 'name=redis' -q | head -1) redis-cli --memkeys",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "redis: scan auth keys",
    "command": "docker exec $(docker ps --filter 'name=redis' -q | head -1) redis-cli --scan --pattern '*auth_service*'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: ping",
    "command": "echo '=== Valkey Health ===' && RESULT=$(docker exec $(docker ps --filter 'name=valkey' -q | head -1) valkey-cli ping 2>/dev/null) && echo \"Response: $RESULT\" && echo \"Status:   Connected\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: info server",
    "command": "echo '=== Valkey Server Info ===' && docker exec $(docker ps --filter 'name=valkey' -q | head -1) valkey-cli info server",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: info stats",
    "command": "echo '=== Valkey Statistics ===' && docker exec $(docker ps --filter 'name=valkey' -q | head -1) valkey-cli info stats",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: keys (all)",
    "command": "echo '=== Valkey Keys ===' && docker exec $(docker ps --filter 'name=valkey' -q | head -1) valkey-cli keys '*'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: flush all",
    "command": "echo '=== Valkey Flush ===' && BEFORE=$(docker exec $(docker ps --filter 'name=valkey' -q | head -1) valkey-cli dbsize | awk '{print $2}') && docker exec $(docker ps --filter 'name=valkey' -q | head -1) valkey-cli flushall > /dev/null && echo \"Keys before: $BEFORE\" && echo \"Keys after:  0\" && echo \"Status:      Flushed\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: interactive CLI",
    "command": "docker exec -it $(docker ps --filter 'name=valkey' -q | head -1) valkey-cli",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "valkey: start (standalone)",
    "command": "echo '=== Starting Valkey ===' && docker run -d --name auth-valkey -p 6380:6379 --restart unless-stopped valkey/valkey:8-alpine valkey-server --appendonly yes --maxmemory 128mb --maxmemory-policy allkeys-lru > /dev/null && echo \"Container: auth-valkey\" && echo \"Port:      6380\" && echo \"Memory:    128MB (LRU eviction)\" && echo \"Status:    Running\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: stop",
    "command": "echo '=== Stopping Valkey ===' && docker stop auth-valkey 2>/dev/null && echo \"Container: auth-valkey\" && echo \"Status:    Stopped\" || echo \"Status:    Not running\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: remove",
    "command": "echo '=== Removing Valkey ===' && docker rm auth-valkey 2>/dev/null && echo \"Container: auth-valkey\" && echo \"Status:    Removed\" || echo \"Status:    No container to remove\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: restart (standalone)",
    "command": "echo '=== Restarting Valkey ===' && docker stop auth-valkey 2>/dev/null; docker rm auth-valkey 2>/dev/null; docker run -d --name auth-valkey -p 6380:6379 --restart unless-stopped valkey/valkey:8-alpine valkey-server --appendonly yes --maxmemory 128mb --maxmemory-policy allkeys-lru > /dev/null && echo \"Container: auth-valkey\" && echo \"Port:      6380\" && echo \"Status:    Restarted\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "valkey: logs",
    "command": "docker logs -f auth-valkey",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "valkey: status",
    "command": "echo '=== Valkey Status ===' && docker ps --filter 'name=valkey' --format 'Container: {{.Names}}\\nStatus:    {{.Status}}\\nPorts:     {{.Ports}}' | head -3",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "dev: start with Valkey",
    "command": "lsof -ti :3000 | xargs kill -9 2>/dev/null || true; REDIS_URL=redis://localhost:6380 bun --watch src/index.ts",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "server: health check (Valkey)",
    "command": "echo '=== Server Health (Cache) ===' && curl -sf http://localhost:3000/health | jq '.dependencies.cache' || echo 'Status: Not responding'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "postgres: interactive psql",
    "command": "docker exec -it $(docker ps --filter 'name=kong-db' -q | head -1) psql -U kong -d kong",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "postgres: list tables",
    "command": "echo '=== Kong Database Tables ===' && docker exec $(docker ps --filter 'name=kong-db' -q | head -1) psql -U kong -d kong -c '\\dt'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "postgres: kong services (SQL)",
    "command": "echo '=== Kong Services (Database) ===' && docker exec $(docker ps --filter 'name=kong-db' -q | head -1) psql -U kong -d kong -c 'SELECT id, name, host, port, protocol FROM services;'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "postgres: kong routes (SQL)",
    "command": "echo '=== Kong Routes (Database) ===' && docker exec $(docker ps --filter 'name=kong-db' -q | head -1) psql -U kong -d kong -c 'SELECT id, name, paths, service_id FROM routes;'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "postgres: db size",
    "command": "echo '=== Kong Database Size ===' && docker exec $(docker ps --filter 'name=kong-db' -q | head -1) psql -U kong -d kong -c \"SELECT pg_size_pretty(pg_database_size('kong'));\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "infra: status check",
    "command": "echo '=== Infrastructure Status ===' && printf 'Kong:     ' && (curl -sf http://localhost:8001/status > /dev/null 2>&1 && echo 'Online' || echo 'Offline') && printf 'Redis:    ' && (docker exec \"$(docker ps --filter name=redis -q | head -1)\" redis-cli ping 2>/dev/null | grep -q PONG && echo 'Online' || echo 'Offline') && printf 'Valkey:   ' && (docker exec \"$(docker ps --filter name=valkey -q | head -1)\" valkey-cli ping 2>/dev/null | grep -q PONG && echo 'Online' || echo 'Offline') && printf 'Postgres: ' && (docker exec \"$(docker ps --filter name=kong-db -q | head -1)\" pg_isready -U kong > /dev/null 2>&1 && echo 'Online' || echo 'Offline')",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "devcontainer: up",
    "command": "echo '=== Starting Devcontainer ===' && docker compose -f .devcontainer/docker-compose.yml up -d 2>&1 | tail -5 && echo '---' && echo 'Status: Started'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "deps: up (Kong + Redis)",
    "command": "echo '=== Starting Dependencies ===' && docker compose -f .devcontainer/docker-compose.yml up -d kong kong-db kong-migrations redis 2>&1 | tail -5 && echo '---' && echo 'Kong:  localhost:8001' && echo 'Redis: localhost:6379'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "deps: up (Kong + Valkey)",
    "command": "echo '=== Starting Dependencies ===' && docker compose -f .devcontainer/docker-compose.yml up -d kong kong-db kong-migrations valkey 2>&1 | tail -5 && echo '---' && echo 'Kong:   localhost:8001' && echo 'Valkey: localhost:6380'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "deps: up (all)",
    "command": "echo '=== Starting All Dependencies ===' && docker compose -f .devcontainer/docker-compose.yml up -d kong kong-db kong-migrations redis valkey 2>&1 | tail -5 && echo '---' && echo 'Kong:   localhost:8001' && echo 'Redis:  localhost:6379' && echo 'Valkey: localhost:6380'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "deps: down",
    "command": "echo '=== Stopping Dependencies ===' && docker compose -f .devcontainer/docker-compose.yml stop kong kong-db redis valkey 2>&1 | tail -5 && echo '---' && echo 'Status: Stopped'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: ps",
    "command": "echo '=== Running Containers ===' && docker ps --format 'table {{.Names}}\\t{{.Status}}\\t{{.Ports}}'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: ps (all)",
    "command": "echo '=== All Containers ===' && docker ps -a --format 'table {{.Names}}\\t{{.Status}}\\t{{.Ports}}'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "devcontainer: down",
    "command": "echo '=== Stopping Devcontainer ===' && docker compose -f .devcontainer/docker-compose.yml down 2>&1 | tail -5 && echo '---' && echo 'Status: Stopped'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "devcontainer: down (clean volumes)",
    "command": "echo '=== Stopping Devcontainer (with volumes) ===' && docker compose -f .devcontainer/docker-compose.yml down -v 2>&1 | tail -5 && echo '---' && echo 'Status:  Stopped' && echo 'Volumes: Removed'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "devcontainer: logs",
    "command": "docker compose -f .devcontainer/docker-compose.yml logs -f",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "devcontainer: status",
    "command": "docker compose -f .devcontainer/docker-compose.yml ps",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "dev: start (watch mode)",
    "command": "bun --watch src/index.ts",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "dev: start (devcontainer env)",
    "command": "bun --env-file=.env.devcontainer run dev",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "dev: clean restart",
    "command": "lsof -ti :3000 | xargs kill -9 2>/dev/null || true; bun --watch src/index.ts",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "dev: quickstart",
    "command": "lsof -ti :3000 | xargs kill -9 2>/dev/null || true; bun scripts/generate-openapi.ts && bun --watch src/index.ts",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "server: kill (port 3000)",
    "command": "echo '=== Kill Server ===' && PID=$(lsof -ti :3000) && if [ -n \"$PID\" ]; then kill -9 $PID 2>/dev/null && echo \"Port:   3000\" && echo \"PID:    $PID\" && echo \"Status: Killed\"; else echo \"Port:   3000\" && echo \"Status: No process running\"; fi",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "server: health check",
    "command": "echo '=== Server Health Check ===' && curl -sf http://localhost:3000/health | jq . || echo 'Status: Not responding'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "test: e2e (direct)",
    "command": "bunx playwright test",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "test: e2e (via Kong)",
    "command": "API_BASE_URL=http://localhost:8000 E2E_HOST_HEADER=auth.local bunx playwright test",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "test: e2e UI",
    "command": "bunx playwright test --ui",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "test: bun (all)",
    "command": "bun test",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "test: bun (watch)",
    "command": "bun test --watch",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "test: k6 smoke (quick)",
    "command": "bun run test:k6:quick",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
  },
  {
    "label": "quality: check (all)",
    "command": "bun run quality:check",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "quality: fix",
    "command": "bun run quality:fix",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docs: generate OpenAPI",
    "command": "echo '=== Generating OpenAPI Spec ===' && bun scripts/generate-openapi.ts && echo '---' && echo 'Output: docs/openapi.yaml' && echo 'Status: Generated'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: security alerts (open only)",
    "command": "echo '=== Open Security Alerts ===' && gh api repos/:owner/:repo/code-scanning/alerts --jq '.[] | select(.state == \"open\")' || echo 'No alerts found'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: security alerts (all)",
    "command": "echo '=== All Security Alerts ===' && gh api repos/:owner/:repo/code-scanning/alerts || echo 'No alerts found'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: security alerts (Dependabot)",
    "command": "echo '=== Dependabot Alerts ===' && gh api repos/:owner/:repo/dependabot/alerts --jq '.[] | select(.state == \"open\")' || echo 'No alerts found'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: trigger security audit",
    "command": "echo '=== Triggering Security Audit ===' && gh workflow run 'Comprehensive Security Audit' --ref master && echo 'Workflow: Comprehensive Security Audit' && echo 'Branch:   master' && echo 'Status:   Triggered' && echo '---' && echo 'Run: gh run list --workflow=\"Comprehensive Security Audit\" --limit=1'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: docker security (Trivy)",
    "command": "echo '=== Docker Security Scan (Trivy) ===' && gh run list --workflow=build-and-deploy.yml --limit=1 --json databaseId -q '.[0].databaseId' | xargs -I{} gh run view {} --log | grep -E '(CRITICAL|HIGH|MEDIUM|CVE-)' | head -100",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: latest workflow run (Build and Deploy)",
    "command": "echo '=== Latest Workflow Runs (Build and Deploy) ===' && gh run list --workflow=build-and-deploy.yml --limit=5",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: latest workflow run (DHI CVE Monitor)",
    "command": "echo '=== Latest Workflow Runs (DHI CVE Monitor) ===' && gh run list --workflow=dhi-cve-monitor.yml --limit=5",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: latest workflow run (Security Audit)",
    "command": "echo '=== Latest Workflow Runs (Security Audit) ===' && gh run list --workflow=security-audit.yml --limit=5",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: latest workflow run (all)",
    "command": "echo '=== Latest Workflow Runs (All) ===' && gh run list --limit=10",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: trigger DHI CVE Monitor",
    "command": "echo '=== Triggering DHI CVE Monitor ===' && gh workflow run 'DHI CVE Monitoring' --ref master && echo 'Workflow: DHI CVE Monitoring' && echo 'Branch:   master' && echo 'Status:   Triggered' && echo '---' && echo 'Run: gh run list --workflow=\"dhi-cve-monitor.yml\" --limit=1'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: workflow artifacts (Build and Deploy)",
    "command": "echo '=== Workflow Artifacts (Build and Deploy) ===' && gh run list --workflow=build-and-deploy.yml --limit=1 --json databaseId -q '.[0].databaseId' | xargs -I{} gh api repos/:owner/:repo/actions/runs/{}/artifacts",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: workflow artifacts (DHI CVE Monitor)",
    "command": "echo '=== Workflow Artifacts (DHI CVE Monitor) ===' && gh run list --workflow=dhi-cve-monitor.yml --limit=1 --json databaseId -q '.[0].databaseId' | xargs -I{} gh api repos/:owner/:repo/actions/runs/{}/artifacts",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "github: workflow artifacts (Security Audit)",
    "command": "echo '=== Workflow Artifacts (Security Audit) ===' && gh run list --workflow=security-audit.yml --limit=1 --json databaseId -q '.[0].databaseId' | xargs -I{} gh api repos/:owner/:repo/actions/runs/{}/artifacts",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: status (all endpoints)",
    "command": "echo '=== OTEL Endpoint Status ===' && set -a && source .env && set +a && echo '--- Base Endpoint ---' && echo $OTEL_EXPORTER_OTLP_ENDPOINT && curl -sf -o /dev/null -w 'HTTP: %{http_code}\\n' --max-time 3 $OTEL_EXPORTER_OTLP_ENDPOINT 2>/dev/null || echo 'Unreachable' && echo '--- Traces Endpoint ---' && echo $OTEL_EXPORTER_OTLP_TRACES_ENDPOINT && curl -sf -X POST -H 'Content-Type: application/json' -d '{}' --max-time 3 $OTEL_EXPORTER_OTLP_TRACES_ENDPOINT -w 'HTTP: %{http_code}\\n' 2>/dev/null || echo 'Unreachable' && echo '--- Metrics Endpoint ---' && echo $OTEL_EXPORTER_OTLP_METRICS_ENDPOINT && curl -sf -X POST -H 'Content-Type: application/json' -d '{}' --max-time 3 $OTEL_EXPORTER_OTLP_METRICS_ENDPOINT -w 'HTTP: %{http_code}\\n' 2>/dev/null || echo 'Unreachable' && echo '--- Logs Endpoint ---' && echo $OTEL_EXPORTER_OTLP_LOGS_ENDPOINT && curl -sf -X POST -H 'Content-Type: application/json' -d '{}' --max-time 3 $OTEL_EXPORTER_OTLP_LOGS_ENDPOINT -w 'HTTP: %{http_code}\\n' 2>/dev/null || echo 'Unreachable'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: ping collector",
    "command": "echo '=== OTEL Collector Ping ===' && set -a && source .env && set +a && echo \"Endpoint: $OTEL_EXPORTER_OTLP_ENDPOINT\" && curl -sf --max-time 3 -v $OTEL_EXPORTER_OTLP_ENDPOINT 2>&1 || echo 'Unreachable'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: traces endpoint check",
    "command": "echo '=== OTEL Traces Endpoint ===' && set -a && source .env && set +a && echo \"Endpoint: $OTEL_EXPORTER_OTLP_TRACES_ENDPOINT\" && curl -sf --max-time 3 -X POST -H 'Content-Type: application/json' -d '{\"resourceSpans\":[]}' $OTEL_EXPORTER_OTLP_TRACES_ENDPOINT -v 2>&1 || echo 'Not responding'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: metrics endpoint check",
    "command": "echo '=== OTEL Metrics Endpoint ===' && set -a && source .env && set +a && echo \"Endpoint: $OTEL_EXPORTER_OTLP_METRICS_ENDPOINT\" && curl -sf --max-time 3 -X POST -H 'Content-Type: application/json' -d '{\"resourceMetrics\":[]}' $OTEL_EXPORTER_OTLP_METRICS_ENDPOINT -v 2>&1 || echo 'Not responding'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: logs endpoint check",
    "command": "echo '=== OTEL Logs Endpoint ===' && set -a && source .env && set +a && echo \"Endpoint: $OTEL_EXPORTER_OTLP_LOGS_ENDPOINT\" && curl -sf --max-time 3 -X POST -H 'Content-Type: application/json' -d '{\"resourceLogs\":[]}' $OTEL_EXPORTER_OTLP_LOGS_ENDPOINT -v 2>&1 || echo 'Not responding'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: show config",
    "command": "echo '=== OTEL Configuration ===' && set -a && source .env && set +a && echo \"Service: $OTEL_SERVICE_NAME\" && echo \"---\" && echo \"Base:    $OTEL_EXPORTER_OTLP_ENDPOINT\" && echo \"Traces:  $OTEL_EXPORTER_OTLP_TRACES_ENDPOINT\" && echo \"Metrics: $OTEL_EXPORTER_OTLP_METRICS_ENDPOINT\" && echo \"Logs:    $OTEL_EXPORTER_OTLP_LOGS_ENDPOINT\"",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: network connectivity test",
    "command": "echo '=== OTEL Network Test ===' && set -a && source .env && set +a && OTEL_HOST=$(echo $OTEL_EXPORTER_OTLP_ENDPOINT | sed 's|http://||' | cut -d: -f1) && OTEL_PORT=$(echo $OTEL_EXPORTER_OTLP_ENDPOINT | sed 's|http://||' | cut -d: -f2 | cut -d/ -f1) && echo \"Host: $OTEL_HOST\" && echo \"Port: $OTEL_PORT\" && nc -zv -w 3 $OTEL_HOST $OTEL_PORT 2>&1",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: service telemetry health",
    "command": "echo '=== Service Telemetry Health ===' && curl -sf http://localhost:3000/health/telemetry | jq . || echo 'Status: Not responding'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: ssh tunnel start",
    "command": "echo '=== SSH Tunnel Start ===' && OTEL_REMOTE=192.168.178.3 && OTEL_PORT=4318 && if lsof -i :${OTEL_PORT} 2>/dev/null | grep -q ssh; then echo \"Local:  localhost:${OTEL_PORT}\" && echo \"Remote: ${OTEL_REMOTE}:${OTEL_PORT}\" && echo \"Status: Already running\"; else ssh -L ${OTEL_PORT}:127.0.0.1:${OTEL_PORT} pi@${OTEL_REMOTE} -N -f && echo \"Local:  localhost:${OTEL_PORT}\" && echo \"Remote: ${OTEL_REMOTE}:${OTEL_PORT}\" && echo \"Status: Started\"; fi",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: ssh tunnel stop",
    "command": "echo '=== SSH Tunnel Stop ===' && set -a && source .env && set +a && OTEL_PORT=$(echo $OTEL_EXPORTER_OTLP_ENDPOINT | sed 's|http://||' | cut -d: -f2 | cut -d/ -f1) && PID=$(lsof -t -i :$OTEL_PORT | head -1) && if [ -n \"$PID\" ]; then kill $PID && echo \"Port:   $OTEL_PORT\" && echo \"PID:    $PID\" && echo \"Status: Stopped\"; else echo \"Port:   $OTEL_PORT\" && echo \"Status: No tunnel running\"; fi",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "otel: ssh tunnel status",
    "command": "echo '=== SSH Tunnel Status ===' && set -a && source .env && set +a && OTEL_PORT=$(echo $OTEL_EXPORTER_OTLP_ENDPOINT | sed 's|http://||' | cut -d: -f2 | cut -d/ -f1) && echo \"Port: $OTEL_PORT\" && lsof -i :$OTEL_PORT 2>&1",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: scout CVEs (pushed image)",
    "command": "echo '=== Docker Scout CVE Scan ===' && echo 'Image: docker.io/zx8086/authentication-v2:latest' && echo 'Filter: CRITICAL, HIGH' && echo '---' && docker scout cves docker.io/zx8086/authentication-v2:latest --only-severities critical,high 2>&1 | head -50",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: scout quickview (pushed image)",
    "command": "echo '=== Docker Scout Quickview ===' && echo 'Image: docker.io/zx8086/authentication-v2:latest' && echo '---' && docker scout quickview docker.io/zx8086/authentication-v2:latest 2>&1",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: scout SBOM (pushed image)",
    "command": "echo '=== Docker Scout SBOM ===' && echo 'Image: docker.io/zx8086/authentication-v2:latest' && echo '---' && docker scout sbom docker.io/zx8086/authentication-v2:latest --format list 2>&1 | head -40",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: scout recommendations",
    "command": "echo '=== Docker Scout Recommendations ===' && echo 'Image: docker.io/zx8086/authentication-v2:latest' && echo '---' && docker scout recommendations docker.io/zx8086/authentication-v2:latest 2>&1",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: inspect labels (pushed image)",
    "command": "echo '=== Docker Image Labels ===' && docker pull -q docker.io/zx8086/authentication-v2:latest > /dev/null && docker inspect docker.io/zx8086/authentication-v2:latest --format '{{json .Config.Labels}}' | jq .",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: verify metadata (pushed image)",
    "command": "echo '=== Docker Image Metadata ===' && docker pull -q docker.io/zx8086/authentication-v2:latest > /dev/null && docker inspect docker.io/zx8086/authentication-v2:latest --format '{{json .Config.Labels}}' | jq -r '[\"Version:  \" + .[\"org.opencontainers.image.version\"], \"Created:  \" + .[\"org.opencontainers.image.created\"], \"Revision: \" + .[\"org.opencontainers.image.revision\"], \"Title:    \" + .[\"org.opencontainers.image.title\"], \"Vendor:   \" + .[\"org.opencontainers.image.vendor\"]] | .[]'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: verify version (registry API)",
    "command": "echo '=== Docker Registry Version Check ===' && echo '--- Local Version ---' && grep '\"version\"' package.json | head -1 && echo '--- Registry Tags ---' && curl -s 'https://hub.docker.com/v2/repositories/zx8086/authentication-v2/tags?page_size=5' | jq . && echo '--- Platforms ---' && docker buildx imagetools inspect docker.io/zx8086/authentication-v2:latest --raw 2>/dev/null | jq .",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: image size (pushed)",
    "command": "echo '=== Docker Image Size ===' && docker manifest inspect docker.io/zx8086/authentication-v2:latest --verbose 2>/dev/null | jq . || echo 'Unable to inspect manifest'",
    "use_new_terminal": false,
    "reveal": "always",
  },
  {
    "label": "docker: attestations (SLSA provenance)",
    "command": "echo '=== Docker Attestations (SLSA) ===' && echo 'Image: docker.io/zx8086/authentication-v2:latest' && echo '---' && docker scout attestation docker.io/zx8086/authentication-v2:latest 2>&1",
    "use_new_terminal": false,
    "reveal": "always",
  },
]
