apiVersion: v1
kind: ConfigMap
metadata:
  name: authentication-config
  namespace: authentication
  labels:
    app.kubernetes.io/name: authentication-service
    app.kubernetes.io/instance: production
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/component: config
    app.kubernetes.io/part-of: authentication-platform
    app.kubernetes.io/managed-by: kubernetes
data:
  # Server Configuration
  NODE_ENV: "production"
  PORT: "3000"

  # JWT Configuration
  KONG_JWT_KEY_CLAIM_NAME: "key"
  JWT_EXPIRATION_MINUTES: "15"

  # Kong Configuration
  KONG_MODE: "KONNECT"
  KONG_CONSUMER_ID_HEADER: "x-consumer-id"
  KONG_CONSUMER_USERNAME_HEADER: "x-consumer-username"
  KONG_ANONYMOUS_HEADER: "x-anonymous-consumer"

  # OpenTelemetry Configuration
  OTEL_SERVICE_NAME: "authentication-service"
  OTEL_SERVICE_VERSION: "2.4.0"
  TELEMETRY_MODE: "otlp"
  OTEL_EXPORTER_OTLP_TIMEOUT: "30000"
  OTEL_BSP_MAX_EXPORT_BATCH_SIZE: "2048"
  OTEL_BSP_MAX_QUEUE_SIZE: "10000"

  # Circuit Breaker Configuration
  CIRCUIT_BREAKER_TIMEOUT: "500"
  CIRCUIT_BREAKER_ERROR_THRESHOLD: "50"
  CIRCUIT_BREAKER_RESET_TIMEOUT: "30000"
  STALE_DATA_TOLERANCE_MINUTES: "60"
  HIGH_AVAILABILITY: "true"

  # API Documentation Configuration
  API_TITLE: "Authentication Service API"
  API_DESCRIPTION: "High-performance authentication service with Kong integration, OpenTelemetry observability, and comprehensive health monitoring"
  API_VERSION: "1.0.0"
  API_LICENSE_NAME: "Proprietary"
  API_LICENSE_IDENTIFIER: "UNLICENSED"
  API_CORS: "*"

  # Profiling Configuration (uses /tmp for read-only filesystem compatibility)
  CONTINUOUS_PROFILING_OUTPUT_DIR: "/tmp/profiles"