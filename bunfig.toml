# Bun 1.3 Testing Configuration
[test]
# Enable concurrent testing for performance
maxConcurrency = 4

# Test environment isolation
env = "test"

# Preload .env file for tests
preload = ["./test/preload.ts"]

# Pure unit tests - safe for concurrent execution
concurrentTestGlob = [
  "**/type-validation.test.ts",
  "**/profiling.test.ts",
  "**/jwt.service.test.ts",
  "**/local-memory-cache.test.ts",
  "**/config.test.ts",
  "**/config-helpers.test.ts",
  "**/logger.test.ts",
  "**/metrics.test.ts"
]

# Integration tests - require external dependencies (run serially)
serialTestGlob = [
  "**/server.test.ts",
  "**/kong.service.test.ts",
  "**/shared-redis-cache.test.ts",
  "**/cache-health.service.test.ts"
]

# Coverage configuration
coveragePathIgnorePatterns = [
  "node_modules/",
  "dist/",
  "coverage/",
  "test/",
  "*.test.ts",
  "*.spec.ts"
]

# Test timeouts
timeout = "30s"

# Enable stricter mode for CI
ci = true